<div class="d-block mx-auto py-2">
    <form [formGroup]="productForm" (ngSubmit)="productForm.valid && submit()" class="d-block m-auto py-4 text-white s-light">
        <h2 class="h2 text-center mb-3">{{ id ? "Update Product" : "Add Product"}}</h2>
        <div class="row">
            <div *ngIf="id" class="col-12 text-center" >
                <img class="d-block mx-auto" style="max-height: 300px;" [src]='env.api + productForm.value.image'>
            </div>
            <div *ngIf="!id" class="col-sm-12">
                <div class="form-group">
                    <label>Upload Image</label>
                    <input type="file" (change)="handleFile($event)" class="form-control-file" placeholder="file name" >
                </div>
            </div>
            <div class="col-12">
                <div class="form-group">
                    <label>Name</label>
                    <input type="text" class="form-control" formControlName="name" placeholder="Name" >
                    <small *ngIf="productFormControl.name.invalid && (productFormControl.name.touched && productFormControl.name.dirty)" class="form-text text-muted">Name must be 4 character long !</small>
                </div>
            </div>
            <div class="col-sm-4">
                <div class="form-group">
                    <label>Net content</label>
                    <input type="text" class="form-control" formControlName="type" placeholder="Net Content Volume" >
                    <small *ngIf="productFormControl.type.invalid && (productFormControl.type.touched && productFormControl.type.dirty)" class="form-text text-muted">Required Field!</small>
                </div>
            </div>
            <div class="col-sm-4">
                <div class="form-group">
                    <label for="exampleInputEmail1">Price</label>
                    <input type="number" class="form-control" formControlName="cost" placeholder="Price" >
                    <small *ngIf="productFormControl.cost.invalid && (productFormControl.cost.touched && productFormControl.cost.dirty)" class="form-text text-muted">Required field!</small>
                </div>
            </div>
            <div class="col-sm-4">
                <div class="form-group">
                    <label for="exampleInputEmail1">Stock Item</label>
                    <input type="number" class="form-control" formControlName="quantity" placeholder="Item in stock" >
                    <small *ngIf="productFormControl.quantity.invalid && (productFormControl.quantity.touched && productFormControl.quantity.dirty)" class="form-text text-muted">Required field!</small>
                </div>
            </div>
            <div class="col-sm-12">
                <div class="form-group">
                    <label for="exampleInputEmail1">Description</label>
                    <textarea rows="4" class="form-control" formControlName="description" placeholder="Description" ></textarea>
                    <small *ngIf="productFormControl.description.invalid && (productFormControl.description.touched && productFormControl.description.dirty)" class="form-text text-muted">Required field!</small>
                </div>
            </div>
        </div>
        <div class="text-center w-100">
            <div *ngIf="message;else spinner">
                <h5 class="h5 my-2 text-center">
                    {{message}}
                </h5>
                <button type="submit" class="btn btn-light mx-1" [disabled]="productForm.invalid">{{ id ? 'Update' : 'Upload'}}</button>
                <button type="button" class="btn btn-secondary mx-1" (click)="reset()">Reset</button>
            </div>
            <ng-template #spinner>
                <div class="text-center">
                    <div class="spinner-border text-white" role="status">
                    </div>
                </div>
            </ng-template>
        </div>
    </form>

</div>